# 🤖 Web Interface Modification Guide (using LLM)

이 문서는 `code_assistant.py`와 같은 LLM 도구를 사용하여 웹 인터페이스(`app.py`)를 수정하고 새로운 모델을 추가하는 방법을 설명합니다.

---

## 1. 현재 시스템 작동 방식 (자동화)

현재 `app.py`는 **자동 모델 탐색** 기능을 갖추고 있습니다. 따라서 대부분의 경우 코드를 직접 수정할 필요가 없습니다.

1.  **모델 목록**: `.env`에 설정된 모든 `AI_API_KEY_...` 변수들을 사용하여 접근 가능한 모든 모델을 자동으로 가져옵니다.
2.  **키 매핑**: 모델명이 `qwen3-235b`라면 `AI_API_KEY_QWEN3_235B` 환경변수를 자동으로 찾아 사용합니다.

> **꿀팁**: 새로운 모델이 출시되면 `.env` 파일에 `AI_API_KEY_모델명=키` 형식으로 한 줄만 추가하고 웹을 새로고침하면 바로 나타납니다.

---

## 2. LLM을 이용한 `app.py` 수정 방법

만약 단순한 추가가 아니라, 특별한 키 매핑 로직이나 UI 변경이 필요하다면 `code_assistant.py`의 `apply` 명령어를 사용하세요.

### 기본 명령어 구조
```bash
python code_assistant.py apply legacy/app.py -q "[지시사항]"
```

---

## 3. 상황별 LLM 요청(Prompt) 예시

### 시나리오 A: 특정 모델에 대해 특수 키 매핑이 필요한 경우
만약 모델명이 복잡하여 자동 매핑이 안 되거나, 여러 모델이 하나의 키를 공유해야 할 때 다음과 같이 요청하세요.

**LLM 요청 예시:**
> "app.py의 _get_client_for_model 메서드에서 'new-super-model'이라는 이름이 들어오면 환경변수 'MY_SPECIAL_KEY'를 사용하도록 로직을 추가해줘."

### 시나리오 B: UI 레이아웃이나 테마 변경
웹 화면의 디자인이나 모델 선택 박스의 위치 등을 바꾸고 싶을 때 요청하세요.

**LLM 요청 예시:**
> "legacy/templates/index.html 파일에서 모델 선택 드롭다운 옆에 현재 사용 중인 모델의 정보를 보여주는 툴팁을 추가해줘."

### 시나리오 C: 새로운 API 기능을 추가하고 싶을 때 (예: 이미지 생성 등)
채팅 외에 다른 기능을 넣고 싶을 때 사용합니다.

**LLM 요청 예시:**
> "app.py에 이미지 생성을 위한 /api/image 엔드포인트를 추가하고, OpenAI의 image generation API를 호출하는 로직을 넣어줘."

---

## 4. 모델 추가 시 LLM에게 전달할 필수 정보

LLM에게 수정을 요청할 때 다음 정보를 함께 주면 더 정확하게 반영해 줍니다.
1.  **모델명**: (예: `gpt-4o`)
2.  **사용할 환경변수명**: (예: `AI_API_KEY_GPT4`)
3.  **Base URL**: (Tokamak 네트워크 기반이 아닌 경우)

---

## 5. 수정 후 검증 절차

1.  **서버 재시작**: LLM이 코드를 수정한 후에는 터미널에서 `app.py`를 재실행해야 합니다.
2.  **로그 확인**: 터미널에 `🔑 Using API Key: ...` 메시지가 제대로 뜨는지 확인하세요.
3.  **브라우저 확인**: 웹 페이지를 새로고침(F5)하여 드롭다운에 모델이 잘 나오는지 테스트하세요.

이제 이 가이드를 참고하여 `code_assistant.py`에게 명령만 내리시면 됩니다! 🚀
